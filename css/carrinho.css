/* ===========================
   THEME / VARS
=========================== */
:root{
  --c-brand: #1db286;
  --c-brand-ink: #0e5343;
  --c-ink: #232325;
  --c-muted: #5c6a67;
  --c-border: #e2e4ea;
  --c-surface: #fff;
  --c-surface-soft: #f5f8fa;
  --c-surface-brand: #f2faf7;
  --c-danger: #e74c3c;

  --radius-lg: 18px;
  --radius-md: 10px;
  --radius-sm: 8px;

  /* Nome do produto (linhas visíveis) */
  --nome-linhas-desktop: 3;
  --nome-linhas-mobile: 3;

  /* Altura da área rolável dos itens */
  --itens-max-altura: 72svh;
}

/* ===========================
   CONTAINER / GRID
=========================== */
main.carrinhoProposta-main{
  max-width:1100px;
  margin:36px auto;
  background:var(--c-surface);
  border-radius:var(--radius-lg);
  box-shadow:0 4px 32px #0001;
  padding:24px;
  border:1px solid var(--c-border);

  display:grid;
  grid-template-columns:1.6fr 0.9fr; /* Itens | Formulário */
  grid-template-areas:
    "title  title"
    "desc   form"
    "items  form";
  gap:18px 24px;
}

h1.carrinhoProposta-title{
  grid-area:title;
  font-weight:700;
  font-size:2rem;
  letter-spacing:1px;
  color:var(--c-brand);
  margin:6px 0 0 6px;
}

.carrinhoProposta-desc{
  grid-area:desc;
  color:var(--c-muted);
  line-height:1.35;
  max-width:220px;
  padding:8px 10px 0 6px;
}

/* Seções */
section[aria-labelledby="itens-carrinho"]{ grid-area:items; }
section[aria-labelledby="dados-cliente"]{  grid-area:form; }

/* ===========================
   CONTROLES DE DESCONTO
=========================== */
#carrinhoProposta-controls{
  display:flex;flex-wrap:wrap;gap:12px;align-items:center;margin:6px 0 10px;
}
#carrinhoProposta-controls input[type="radio"]{
  accent-color:var(--c-brand);
}
#carrinhoProposta-desc-global{
  width:80px;padding:6px 8px;border:1px solid #d4dde7;border-radius:7px;text-align:right;
  background:var(--c-surface-soft);color:var(--c-ink);
}
#carrinhoProposta-global-wrap[disabled],
#carrinhoProposta-desc-global:disabled{
  opacity:.55;
}

/* ===========================
   TABELA
=========================== */
table.carrinhoProposta-tabela{
  width:100%;
  border-collapse:collapse;
  margin-bottom:12px;
  table-layout:fixed; /* controla largura por coluna */
}

/* Suporte a <colgroup> (recomendado): */
.carrinhoProposta-tabela col.col-sku{ width:92px; }
.carrinhoProposta-tabela col.col-produto{ width:40%; }     /* dá espaço ao nome */
.carrinhoProposta-tabela col.col-qtd{ width:64px; }
.carrinhoProposta-tabela col.col-preco{ width:120px; }
.carrinhoProposta-tabela col.col-desc{ width:110px; }
.carrinhoProposta-tabela col.col-total{ width:120px; }
.carrinhoProposta-tabela col.col-acoes{ width:110px; }

/* Fallback sem <colgroup>: SKU | Produto | Qtd | Preço | Desc | Total | Ações */
.carrinhoProposta-tabela thead th:nth-child(1),
.carrinhoProposta-tabela tbody td:nth-child(1){ width:92px; }
.carrinhoProposta-tabela thead th:nth-child(2),
.carrinhoProposta-tabela tbody td:nth-child(2){ width:auto; } /* Produto expande */
.carrinhoProposta-tabela thead th:nth-child(3),
.carrinhoProposta-tabela tbody td:nth-child(3){ width:64px; text-align:center; }
.carrinhoProposta-tabela thead th:nth-child(4),
.carrinhoProposta-tabela tbody td:nth-child(4){ width:120px; text-align:right; white-space:nowrap; }
.carrinhoProposta-tabela thead th:nth-child(5),
.carrinhoProposta-tabela tbody td:nth-child(5){ width:110px; text-align:center; white-space:nowrap; }
.carrinhoProposta-tabela thead th:nth-child(6),
.carrinhoProposta-tabela tbody td:nth-child(6){ width:120px; text-align:right; white-space:nowrap; }
.carrinhoProposta-tabela thead th:nth-child(7),
.carrinhoProposta-tabela tbody td:nth-child(7){ width:110px; text-align:right; }

/* Em desktop, evita “coluna de produto” colapsar */
@media (min-width:981px){
  .carrinhoProposta-tabela thead th:nth-child(2),
  .carrinhoProposta-tabela tbody td:nth-child(2){
    min-width:260px;
  }
}

th.carrinhoProposta-th,
td.carrinhoProposta-td{
  padding:10px 10px;
  text-align:left;
}

th.carrinhoProposta-th{
  background:var(--c-surface-brand);
  font-weight:600;
  color:var(--c-brand-ink);
  border-bottom:2px solid var(--c-border);
  position:sticky; top:0; z-index:1;
}

td.carrinhoProposta-td{
  background:var(--c-surface);
  border-bottom:1px solid var(--c-border);
}

/* Zebrado */
.carrinhoProposta-tabela tbody tr:nth-child(odd) td{
  background:#fbfdfc;
}

/* Números alinhados lindos */
.carrinhoProposta-tabela td:nth-child(4),
.carrinhoProposta-tabela td:nth-child(6){
  font-variant-numeric: tabular-nums;
}

/* Nome do produto: multi-linha com clamp */
td.nome-produto .nome-produto-inner{
  display:-webkit-box;
  -webkit-box-orient:vertical;
  -webkit-line-clamp:var(--nome-linhas-desktop);
  overflow:hidden;
  white-space:normal;
  word-break:break-word;
  overflow-wrap:anywhere;
  line-height:1.25;
  hyphens:auto;
  max-width:100% !important; /* ignora largura via JS */
  padding-right:6px;
}

/* Caso não exista o span interno */
td.nome-produto{
  display:-webkit-box;
  -webkit-box-orient:vertical;
  -webkit-line-clamp:var(--nome-linhas-desktop);
  overflow:hidden;
  white-space:normal;
  word-break:break-word;
  overflow-wrap:anywhere;
  line-height:1.25;
  hyphens:auto;
}

/* Inputs dentro da tabela (ex.: desconto por item) */
td.carrinhoProposta-td input.desc-item{
  width:68px;
  padding:6px 8px;
  border:1px solid #d4dde7;
  border-radius:7px;
  text-align:right;
  background:var(--c-surface-soft);
  color:var(--c-ink);
}
td.carrinhoProposta-td input.desc-item:focus,
#carrinhoProposta-desc-global:focus{
  outline:none;
  border-color:var(--c-brand);
  box-shadow:0 0 0 3px #1db28622;
}

/* Subtotal destacado (opcional) */
td.subtotal-cell{ font-variant-numeric: tabular-nums; }

/* Área de itens rolável para o cabeçalho “grudar” */
section[aria-labelledby="itens-carrinho"]{
  max-height:var(--itens-max-altura);
  overflow:auto;
  padding-right:6px;
}

/* Scrollbar mais confortável - WebKit/Chromium */
section[aria-labelledby="itens-carrinho"]::-webkit-scrollbar{ width:12px; }
section[aria-labelledby="itens-carrinho"]::-webkit-scrollbar-track{
  background:#f1f4f6; border-radius:10px;
}
section[aria-labelledby="itens-carrinho"]::-webkit-scrollbar-thumb{
  background:#c8d4de; border-radius:10px; border:3px solid #f1f4f6;
}
section[aria-labelledby="itens-carrinho"]::-webkit-scrollbar-thumb:hover{
  background:#b7c6d2;
}
/* Firefox */
section[aria-labelledby="itens-carrinho"]{
  scrollbar-width:auto;
  scrollbar-color:#c8d4de #f1f4f6;
}

/* Carrinho vazio */
.carrinhoProposta-vazio{
  color:#e95757;
  text-align:center;
  font-size:1.05em;
  padding:18px 0;
}

/* ===========================
   FORM / CAMPOS
=========================== */
.carrinhoProposta-section-title{
  font-size:1.18em;
  color:var(--c-brand);
  margin:2px 0 10px;
  font-weight:600;
}

.carrinhoProposta-campos{
  display:grid;
  grid-template-columns:1fr;
  gap:10px 12px;
  margin-bottom:8px;
}

.carrinhoProposta-campos label{
  font-size:.95em;
  display:block;
  margin-bottom:4px;
  color:#107058;
  font-weight:500;
}

.carrinhoProposta-campos input,
.carrinhoProposta-campos select{
  background:var(--c-surface-soft);
  color:var(--c-ink);
  border:1.5px solid #d4dde7;
  border-radius:8px;
  padding:10px 12px;
  font-size:1em;
  width:100%;
  transition:border .2s, box-shadow .2s;
}
.carrinhoProposta-campos input:focus,
.carrinhoProposta-campos select:focus{
  border-color:var(--c-brand);
  outline:none;
  box-shadow:0 0 0 3px #1db28622;
}
.carrinhoProposta-campos input.carrinhoProposta-erro,
.carrinhoProposta-campos select.carrinhoProposta-erro{
  border-color:var(--c-danger);
  background:#fbeaea;
}

/* ===========================
   BOTÕES
=========================== */
.carrinhoProposta-botoes{
  display:flex;
  gap:12px;
  margin-top:8px;
  justify-content:flex-end;
  flex-wrap:wrap;
}

button.carrinhoProposta-btn{
  background:var(--c-brand);
  color:#fff;
  font-weight:700;
  border:none;
  border-radius:var(--radius-md);
  font-size:1.05em;
  padding:11px 22px;
  cursor:pointer;
  transition:transform .06s ease, background .2s ease;
  box-shadow:0 3px 14px #20be9e1a;
}
button.carrinhoProposta-btn:hover{ transform:translateY(-1px); }
button.carrinhoProposta-btn:active{ transform:translateY(0); }
button.carrinhoProposta-btn[disabled]{
  background:#b3cdc2; color:#fff; cursor:not-allowed; box-shadow:none;
}

/* Botão remover */
.remover-carrinho{
  background:var(--c-danger);
  color:#fff;
  padding:6px 12px;
  border-radius:var(--radius-sm);
  border:none;
  cursor:pointer;
}
.remover-carrinho:hover{ filter:brightness(.95); }

/* ===========================
   MENSAGENS
=========================== */
.carrinhoProposta-msg{
  margin-top:12px;
  font-size:1.05em;
  border-radius:var(--radius-sm);
  background:var(--c-surface-soft);
  color:var(--c-brand);
  padding:12px 14px;
  border:1.5px solid #1db28644;
  display:none;
  align-items:center;
  gap:8px;
}
.carrinhoProposta-msg.carrinhoProposta-erro{
  color:var(--c-danger);
  border-color:var(--c-danger);
  background:#fbeaea;
}

/* ===========================
   RESPONSIVO
=========================== */
@media (max-width:980px){
  main.carrinhoProposta-main{
    grid-template-columns:1fr;
    grid-template-areas:
      "title"
      "desc"
      "form"
      "items";
    padding:16px;
  }
  .carrinhoProposta-campos{ grid-template-columns:1fr; }
  h1.carrinhoProposta-title{ font-size:1.6rem; margin-left:2px; }

  /* libera a rolagem da página inteira no mobile */
  section[aria-labelledby="itens-carrinho"]{ max-height:none; }

  /* nome em N linhas no mobile */
  td.nome-produto .nome-produto-inner,
  td.nome-produto{ -webkit-line-clamp:var(--nome-linhas-mobile); }
}

/* Telas maiores: mais “fôlego” na lista de itens */
@media (min-width:1280px){
  section[aria-labelledby="itens-carrinho"]{ max-height:78svh; }
}

/* ===========================
   IMPRESSÃO
=========================== */
@media print{
  main.carrinhoProposta-main{
    box-shadow:none; border:none; padding:0; max-width:100%;
  }
  th.carrinhoProposta-th{ position:static; background:#fff; color:#000; }
  td.nome-produto .nome-produto-inner,
  td.nome-produto{
    display:block; -webkit-line-clamp:unset; overflow:visible;
  }
  .remover-carrinho, .carrinhoProposta-botoes, #carrinhoProposta-controls{ display:none !important; }
}

/* ===== NOME DO PRODUTO (th + td) ===== */

/* cabeçalho da coluna "Produto" (caso use class="nomeproduto") */
.carrinhoProposta-tabela th.nomeproduto{
  background: var(--c-surface-brand);
  color: var(--c-brand-ink);
  font-weight: 600;
  border-bottom: 2px solid var(--c-border);
  position: sticky; top: 0; z-index: 1;
  text-align: left;
  padding: 10px 10px;
}

/* célula da coluna Produto */
td.nome-produto{
  white-space: normal;
  word-break: break-word;
  overflow-wrap: anywhere;
  line-height: 1.35;
}

/* texto interno do nome (limite visual por "ch" + clamp de linhas) */
td.nome-produto .nome-produto-inner{
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: var(--nome-linhas-desktop);
  line-height: 1.35;
  max-width: 34ch !important;   /* desktop */
}

/* mobile: menos caracteres por linha e mesmo clamp configurável */
@media (max-width: 980px){
  td.nome-produto .nome-produto-inner{
    -webkit-line-clamp: var(--nome-linhas-mobile);
    max-width: 26ch !important; /* mobile */
  }
}

/* ===================================================================
   PATCH — APENAS CONTAINER DOS ITENS
   (mais espaçamento + barra horizontal só aqui, sem encolher colunas)
=================================================================== */

/* 1) Barra horizontal SÓ na área de itens */
section[aria-labelledby="itens-carrinho"]{
  overflow-y: auto;            /* mantém vertical */
  overflow-x: auto !important; /* ativa horizontal somente aqui */
  padding-bottom: 8px;         /* respiro pra barra */
}

/* 2) Tabela pode ser mais larga que o container (não altera colunas) */
/*    Ajuste 1600px conforme a soma real das suas colunas */
section[aria-labelledby="itens-carrinho"] .carrinhoProposta-tabela{
  min-width: 900px !important;
}

/* 3) + espaçamento nas células (somente itens) */
section[aria-labelledby="itens-carrinho"] .carrinhoProposta-tabela th.carrinhoProposta-th,
section[aria-labelledby="itens-carrinho"] .carrinhoProposta-tabela td.carrinhoProposta-td{
  padding: 16px 20px !important;  /* antes 10px 10px */
  line-height: 1.4;
}

/* 4) Inputs mais confortáveis (somente itens) */
section[aria-labelledby="itens-carrinho"] td.carrinhoProposta-td input.desc-item{
  padding: 10px 12px !important;  /* antes 6px 8px */
  height: auto;
}
/* ====== Form de endereços (cadastro/entrega) ====== */
.grid-endereco{
  display:grid;
  grid-template-columns: minmax(140px, 1fr) 1.6fr 140px;
  gap:10px 12px;
}
.grid-endereco .full{ grid-column: 1 / -1; }
.grid-endereco input,
.grid-endereco select{ width:100%; }

.cep-wrap{ display:flex; gap:8px; align-items:center; }
.cep-wrap input{ flex:1; }
.cep-wrap .cep-busca{
  padding:8px 10px;
  border:1.5px solid #d4dde7;
  background: var(--c-surface-soft);
  border-radius:8px;
  cursor:pointer;
}
.chk-line{ display:flex; align-items:center; gap:8px; }

/* responsivo */
@media (max-width:980px){
  .grid-endereco{ grid-template-columns: 1fr; }
}
