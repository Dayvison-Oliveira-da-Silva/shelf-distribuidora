<main>
  <div id="quadro-avisos">
    <style>
      #quadro-avisos {
        display: flex;
        flex-direction: column;

      }
    </style>
    <!-- AVISO: BOLETO -->
    <div id="aviso-boleto"
      style="margin:16px 0; border:1px solid #e6eaef; border-radius:14px; background:#fff; box-shadow:0 4px 20px rgba(0,0,0,.04);">
      <style>
        #aviso-boleto {
          font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
          color: #1f2d2a
        }

        #aviso-boleto .wrap {
          display: flex;
          gap: 18px;
          padding: 16px 18px;
          align-items: flex-start
        }

        #aviso-boleto .img {
          flex: 0 0 120px;
          display: flex;
          align-items: center;
          justify-content: center;
          background: #f4f7fa;
          border-radius: 12px;
          padding: 10px
        }

        #aviso-boleto .title {
          font-weight: 800;
          font-size: 18px;
          color: #0f5b4d;
          margin: 2px 0 6px
        }

        #aviso-boleto .tag {
          background: #fff3cd;
          color: #8a6d3b;
          padding: 2px 8px;
          border-radius: 999px;
          font-size: 12px;
          border: 1px solid #f2e3a6
        }

        #aviso-boleto p {
          margin: 6px 0 10px;
          line-height: 1.45
        }

        #aviso-boleto ul {
          margin: 0;
          padding: 0 0 0 18px
        }

        #aviso-boleto li {
          margin: 6px 0;
        }

        #aviso-boleto .ok {
          color: #107058;
          font-weight: 600
        }

        #aviso-boleto .note {
          font-size: 12px;
          color: #5e6a67;
          margin-top: 8px
        }

        @media (max-width:720px) {
          #aviso-boleto .wrap {
            flex-direction: column
          }

          #aviso-boleto .img {
            width: 100%;
          }
        }
      </style>

      <div class="wrap">
        <div class="img" aria-hidden="true">
          <!-- Ícone/ilustração inline -->
          <svg viewBox="0 0 128 96" width="96" height="72" role="img" aria-label="Boleto bancário">
            <defs>
              <linearGradient id="g" x1="0" x2="1">
                <stop offset="0" stop-color="#1db286" />
                <stop offset="1" stop-color="#0f5b4d" />
              </linearGradient>
            </defs>
            <rect x="6" y="10" width="116" height="76" rx="10" fill="#ffffff" stroke="#cfd8e3" />
            <rect x="14" y="20" width="100" height="12" rx="2" fill="#e9eef5" />
            <!-- “código de barras” -->
            <g fill="#8aa0b6">
              <rect x="16" y="38" width="2" height="36" />
              <rect x="20" y="38" width="4" height="36" />
              <rect x="26" y="38" width="1.5" height="36" />
              <rect x="30" y="38" width="3" height="36" />
              <rect x="35" y="38" width="2" height="36" />
              <rect x="40" y="38" width="5" height="36" />
              <rect x="47" y="38" width="1.5" height="36" />
              <rect x="50" y="38" width="3" height="36" />
              <rect x="55" y="38" width="2" height="36" />
              <rect x="60" y="38" width="4" height="36" />
              <rect x="66" y="38" width="1.5" height="36" />
              <rect x="70" y="38" width="3" height="36" />
              <rect x="75" y="38" width="2" height="36" />
              <rect x="80" y="38" width="5" height="36" />
              <rect x="87" y="38" width="1.5" height="36" />
              <rect x="90" y="38" width="3" height="36" />
              <rect x="95" y="38" width="2" height="36" />
              <rect x="100" y="38" width="4" height="36" />
            </g>
            <!-- selo “ABERTO” -->
            <g>
              <rect x="60" y="12" rx="6" width="58" height="18" fill="url(#g)" />
              <text x="89" y="25" text-anchor="middle" font-family="system-ui, Arial" font-size="10" fill="#fff"
                font-weight="700">STATUS: ABERTO</text>
            </g>
          </svg>
        </div>

        <div class="txt">
          <div class="title">Atenção para pedidos com <span class="tag">Boleto</span></div>
          <p>
            Quando o cliente paga via <b>boleto</b>, o pedido é enviado ao Tiny com <b>situação
              “aberto”</b>.
            Isso acontece porque todo boleto precisa de <b>aprovação do financeiro</b>.
          </p>
          <ul>
            <li>O <b>Banco/Carteira</b> (meio de pagamento) é definido <span class="ok">automaticamente como
                “Santander”</span>.</li>
            <li>Você pode informar <b>Dias</b> (offset) e/ou <b>Data</b> (dd/mm/aaaa) para cada parcela do
              boleto.</li>
            <li>Outras formas (PIX, Débito, Crédito, Dinheiro) seguem como <b>“aprovado”</b> ao enviar,
              desde que o total esteja quitado.</li>
          </ul>
          <p class="note">
            Plataforma: este carrinho integra produtos, cadastro do cliente, proposta e <b>pedido Tiny</b>
            em um só fluxo,
            com regras automáticas de pagamento e registro do envio — pensado para dar agilidade ao vendedor
            e
            transparência ao backoffice.
          </p>
        </div>
      </div>
    </div>

    <!-- AVISO: OFERTAS (mesma estrutura do primeiro, com <style> escopado) -->
    <div id="aviso-ofertas"
      style="margin:16px 0; border:1px solid #e6eaef; border-radius:14px; background:#fff; box-shadow:0 4px 20px rgba(0,0,0,.04);">
      <style>
        #aviso-ofertas {
          font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
          color: #1f2d2a
        }

        #aviso-ofertas .wrap {
          display: flex;
          gap: 18px;
          padding: 16px 18px;
          align-items: flex-start
        }

        #aviso-ofertas .img {
          flex: 0 0 120px;
          display: flex;
          align-items: center;
          justify-content: center;
          background: #fff4f3;
          border-radius: 12px;
          padding: 10px
        }

        #aviso-ofertas .title {
          font-weight: 800;
          font-size: 18px;
          color: #8a1d2b;
          margin: 2px 0 6px
        }

        #aviso-ofertas .chip {
          background: #fee2e2;
          color: #b91c1c;
          padding: 2px 8px;
          border-radius: 999px;
          font-size: 12px;
          border: 1px solid #fecaca
        }

        #aviso-ofertas p {
          margin: 6px 0 10px;
          line-height: 1.45
        }

        #aviso-ofertas ul {
          margin: 0;
          padding: 0 0 0 18px
        }

        #aviso-ofertas li {
          margin: 6px 0;
        }

        #aviso-ofertas .note {
          font-size: 12px;
          color: #5e6a67;
          margin-top: 8px
        }

        @media (max-width:720px) {
          #aviso-ofertas .wrap {
            flex-direction: column
          }

          #aviso-ofertas .img {
            width: 100%;
          }
        }
      </style>

      <div class="wrap">
        <div class="img" aria-hidden="true">
          <!-- Ícone/ilustração inline -->
          <svg viewBox="0 0 128 96" width="96" height="72" role="img" aria-label="Ofertas promocionais">
            <defs>
              <linearGradient id="g-off" x1="0" x2="1">
                <stop offset="0" stop-color="#ff3b30" />
                <stop offset="1" stop-color="#ff9500" />
              </linearGradient>
            </defs>
            <path
              d="M18 30 L74 12 a6 6 0 0 1 7 3 l24 44 a6 6 0 0 1 -3 8 L46 85 a6 6 0 0 1 -7 -3 L15 38 a6 6 0 0 1 3 -8z"
              fill="url(#g-off)" />
            <circle cx="69" cy="25" r="5" fill="#fff" opacity=".9" />
            <g fill="#fff">
              <circle cx="44" cy="48" r="6" />
              <circle cx="74" cy="66" r="6" />
              <rect x="50" y="50" width="26" height="6" transform="rotate(-32 63 53)" rx="3" />
            </g>
          </svg>
        </div>

        <div class="txt">
          <div class="title">
            Dica: encontre os itens em promoção
            <span class="chip">PROMOÇÃO</span>
          </div>
          <p>
            Para visualizar <b>apenas</b> os produtos com desconto, digite <b>OFF</b> na barra de busca.
            O filtro reconhece <i>OFF</i>, <i>Off</i> ou <i>off</i>.
          </p>
          <ul>
            <li>Use <b>somente</b> <code>OFF</code> para listar as ofertas.</li>
            <li>Se combinar com outras palavras (ex.: “off talge”), o filtro pode <b>não retornar</b> os
              itens esperados.</li>
            <li>Para voltar ao catálogo completo, basta limpar o campo de busca.</li>
            <li>Os produtos em promoção exibem selo de desconto e preço destacado.</li>
          </ul>
          <p class="note">
            Dica rápida: escreveu <b>OFF</b>, vê ofertas. Apagou, volta a ver tudo.
          </p>
        </div>
      </div>
    </div>
    <!-- AVISO: BONIFICAÇÕES (dinâmico por vendedor) -->
    <div id="aviso-bonus"
      style="margin:16px 0; border:1px solid #e6eaef; border-radius:14px; background:#fff; box-shadow:0 4px 20px rgba(0,0,0,.04);">
      <style>
        #aviso-bonus {
          font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
          color: #1f2d2a
        }

        #aviso-bonus .wrap {
          display: flex;
          gap: 18px;
          padding: 16px 18px;
          align-items: flex-start
        }

        #aviso-bonus .img {
          flex: 0 0 120px;
          display: flex;
          align-items: center;
          justify-content: center;
          background: #f3f8f5;
          border-radius: 12px;
          padding: 10px
        }

        #aviso-bonus .title {
          font-weight: 800;
          font-size: 18px;
          color: #0f5132;
          margin: 2px 0 6px
        }

        #aviso-bonus .chip {
          background: #d1fae5;
          color: #065f46;
          padding: 2px 8px;
          border-radius: 999px;
          font-size: 12px;
          border: 1px solid #a7f3d0
        }

        #aviso-bonus p {
          margin: 6px 0 10px;
          line-height: 1.45
        }

        #aviso-bonus ul {
          margin: 0;
          padding: 0 0 0 18px
        }

        #aviso-bonus li {
          margin: 6px 0;
        }

        #aviso-bonus .total {
          margin-top: 10px;
          font-weight: 800;
          color: #0f5132
        }

        #aviso-bonus .note {
          font-size: 12px;
          color: #5e6a67;
          margin-top: 6px
        }

        @media (max-width:720px) {
          #aviso-bonus .wrap {
            flex-direction: column
          }

          #aviso-bonus .img {
            width: 100%
          }
        }
      </style>

      <div class="wrap">
        <div class="img" aria-hidden="true">
          <!-- selo/ilustração -->
          <svg viewBox="0 0 128 96" width="96" height="72" role="img" aria-label="Bonificações">
            <defs>
              <linearGradient id="g-bonus" x1="0" x2="1">
                <stop offset="0" stop-color="#22c55e" />
                <stop offset="1" stop-color="#0ea5e9" />
              </linearGradient>
            </defs>
            <rect x="8" y="12" rx="10" width="112" height="72" fill="#fff" stroke="#cfe3d6" />
            <path d="M20 64h88" stroke="#cfe3d6" />
            <circle cx="40" cy="40" r="16" fill="url(#g-bonus)" />
            <path d="M34 40l4 4 8-8" stroke="#fff" stroke-width="3" fill="none" stroke-linecap="round"
              stroke-linejoin="round" />
            <rect x="60" y="32" rx="3" width="40" height="6" fill="#e6f7ee" />
            <rect x="60" y="44" rx="3" width="36" height="6" fill="#e6f7ee" />
          </svg>
        </div>

        <div class="txt">
          <div class="title">
            Bonificações do mês
            <span id="bonus-chip" class="chip">Vendedor</span>
          </div>
          <p>As metas abaixo são aplicadas conforme o seu perfil.</p>
          <ul id="bonus-list">
            <!-- itens inseridos via JS -->
          </ul>
          <div id="bonus-total" class="total"></div>
          <p class="note">Critérios válidos para pedidos dentro do período vigente e respeitando os mínimos por pedido.
          </p>
        </div>
      </div>
    </div>

    <script>
      (function () {
        // Lê o vendedor do localStorage em possíveis formatos
        function getVendedorFromLS() {
          try {
            const raw = localStorage.getItem("usuario_shelf");
            if (!raw) return null;
            const data = JSON.parse(raw);

            // formato direto: { id, tipo, usuario, ... }
            if (data && typeof data === "object" && ("id" in data || "tipo" in data || "usuario" in data)) {
              return { id: String(data.id ?? ""), tipo: String(data.tipo ?? "").toLowerCase(), nome: data.usuario ?? "" };
            }
            // formato agrupado por chave (ex.: CPF na raiz)
            const keys = Object.keys(data || {});
            if (keys.length) {
              const k = keys[0];
              const v = data[k] || {};
              return { id: String(v.id ?? ""), tipo: String(v.tipo ?? "").toLowerCase(), nome: v.usuario ?? "" };
            }
          } catch (e) { }
          return null;
        }

        // Regras
        const regras = {
          // por TIPO
          tipo: {
            varejo: {
              chip: "Varejo",
              itens: [
                "Faz 30 coberturas de clientes já cadastrados (pedido mínimo R$ 200) → +R$ 300",
                "Cadastro de 20 novos clientes com venda gerada (pedido mínimo R$ 200) → +R$ 400",
                "Alcança a meta de R$ 25.000,00 → +R$ 400",
                "Vende R$ 4.000 em SKUs prioritários → +R$ 300"
              ],
              total: "Totalizando R$ 1.400 em bonificações"
            },
            grandes: {
              chip: "Grandes Contas",
              itens: [
                "Cadastro de 10 novos clientes com venda gerada (pedido mínimo R$300) → +R$ 200",
                "Alcança a meta de R$55.000,00 → +R$ 500",
                "Cadastro de nova rede com CNPJ Matriz + filiais → +R$ 500",
                "Vende R$ 4.000 em SKUs prioritários → +R$ 200"
              ],
              total: "Totalizando R$ 1.400 em bonificações"
            }
          },
          // por ID (sobrepõe o tipo)
          id: {
            "825720218": {
              chip: "ID: 825720218",
              itens: [
                "Cadastro de 10 novos clientes com venda gerada (pedido mínimo R$300) → +R$ 200",
                "Alcança a meta de R$70.000,00 → +R$ 500",
                "Cadastro de nova rede com CNPJ Matriz + filiais → +R$ 500",
                "Vende R$ 10.000 em SKUs prioritários → +R$ 200"
              ],
              total: "Totalizando R$ 1.400 em bonificações"
            },
            "821382109": {
              chip: "ID: 821382109",
              itens: [
                "Cadastro de 10 novos clientes com venda gerada (pedido mínimo R$300) → +R$ 200",
                "Alcança a meta de R$120.000,00 → +R$ 500",
                "Cadastro de nova rede com CNPJ Matriz + filiais → +R$ 500",
                "Vende R$ 10.000 em SKUs prioritários → +R$ 200"
              ],
              total: "Totalizando R$ 1.400 em bonificações"
            }
          }
        };

        // Monta o aviso
        function renderBonus() {
          const box = document.getElementById("aviso-bonus");
          if (!box) return;

          const vend = getVendedorFromLS();
          if (!vend) { box.style.display = "none"; return; }

          const regra = (vend.id && regras.id[vend.id])
            || (vend.tipo && regras.tipo[vend.tipo])
            || null;

          if (!regra) { box.style.display = "none"; return; }

          // Preenche UI
          const ul = box.querySelector("#bonus-list");
          const chip = box.querySelector("#bonus-chip");
          const total = box.querySelector("#bonus-total");

          chip.textContent = regra.chip;
          ul.innerHTML = regra.itens.map(txt => `<li>${txt}</li>`).join("");
          total.textContent = regra.total;
        }

        renderBonus();
      })();
    </script>

  </div>
</main>
